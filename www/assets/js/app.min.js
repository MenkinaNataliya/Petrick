!function(){for(var t,i=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],e=i.length,n=window.console=window.console||{};e--;)n[t=i[e]]||(n[t]=function(){})}();var app=app||{};app.config={},app.state={},app.$document=$(document),app.$window=$(window),app.$html=$("html"),app.$body=$("body"),app.$=$,(app=app||{}).utils=app.utils||{},(app=app||{}).utils=app.utils||{},app.utils.animateBody=function(t){app.$("html,body").animate({scrollTop:t},300)},window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},app.utils.initBlockMobileScroll=function(){$(document).on("touchmove",function(t){$("body").hasClass("is_block-scrolling")&&t.preventDefault()}),$("body").on("touchstart",".mobile-scroll",function(t){0===t.currentTarget.scrollTop?t.currentTarget.scrollTop=1:t.currentTarget.scrollHeight===t.currentTarget.scrollTop+t.currentTarget.offsetHeight&&(t.currentTarget.scrollTop-=1)}),$("body").on("touchmove",".mobile-scroll",function(t){$(this)[0].scrollHeight>$(this).innerHeight()&&t.stopPropagation()})},jQuery,jQuery.fn.extend({addClassDelayed:function(t,i){var e=app.$(this);i=i||30,setTimeout(function(){e.addClass(t)},i)},removeClassDelayed:function(t,i){var e=app.$(this);i=i||30,setTimeout(function(){e.removeClass(t)},i)}}),(app=app||{}).utils=app.utils||{},app.utils.detectMobile={Windows:function(){return/IEMobile/i.test(navigator.userAgent)},Android:function(){return/Android/i.test(navigator.userAgent)},BlackBerry:function(){return/BlackBerry/i.test(navigator.userAgent)},iOS:function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},any:function(){return app.utils.detectMobile.Android()||app.utils.detectMobile.BlackBerry()||app.utils.detectMobile.iOS()||app.utils.detectMobile.Windows()}},app.utils.detectMobile.Android()&&app.$html.addClass("is_android"),app.utils.detectMobile.iOS()&&app.$html.addClass("is_ios"),app.utils.detectMobile.any()&&app.$html.addClass("is_mobile"),(app=app||{}).utils=app.utils||{},app.utils.serverErrorText="Ошибка доступа к серверу, попробуйте позже",app.utils.serverError=function(){alert(app.utils.serverErrorText)},(app=app||{}).utils=app.utils||{},app.utils.event=function(t,i,e,n){"function"==typeof ga&&(i=void 0===i?"event":i.toString(),ga("send","event",t,i,e,n))},jQuery,jQuery.fn.extend({clickEvent:function(t,i,e,n){app.$(this).click(function(){app.utils.event(t,i,e,n)})}}),(app=app||{}).utils=app.utils||{},app.utils.getParameter=function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return null===i?null:decodeURIComponent(i[1].replace(/\+/g," "))},function(t){function i(){app.config.isTap=!0,app.$document.off("touchstart",i),app.$document.off("MSPointerDown",i)}app.$document.on("touchstart",i),app.$document.on("MSPointerDown",i),jQuery.fn.extend({clicktouch:function(i){t(this).css("-webkit-tap-highlight-color","rgba(0,0,0,0)"),t(this).on("touchstart MSPointerDown",function(e){t.proxy(i,this)(e),e.preventDefault(),e.stopPropagation()}),t(this).on("touchmove MSPointerMove",function(t){t.preventDefault(),t.stopPropagation()}),t(this).on("click",function(e){if(app.config.isTap)return e.preventDefault(),!1;t.proxy(i,this)(e)})}})}(jQuery),jQuery,jQuery.fn.extend({swipe:function(t,i){var e,n,o;this.on("touchstart",function(t){e=t.originalEvent.touches[0].clientX,n=t.originalEvent.touches[0].clientY,o=!1}).on("touchmove",function(s){if(e&&n){var a=s.originalEvent.changedTouches[0].clientX,r=s.originalEvent.changedTouches[0].clientY,l=e-a,p=n-r;if(Math.abs(l)>10&&Math.abs(l)>Math.abs(p)&&!o){(l>0?app.$.proxy(i,this):app.$.proxy(t,this))(s),o=!0}o&&s.preventDefault()}}).on("touchend touchcancel",function(t){e=null,n=null})}}),(app=app||{}).utils=app.utils||{},app.utils.declineNumeral=function(t,i){var e=[2,0,1,1,1,2];return i[t%100>4&&t%100<20?2:e[t%10<5?t%10:5]]},Number.prototype.mod=function(t){return(this%t+t)%t},app.utils.leadingZeros=function(t,i){i=void 0!==i?i:2;for(var e=t+"";e.length<i;)e="0"+e;return e},app.utils.linear=function(t,i,e){return(i-t)*e+t},app.utils.formatNumber=function(t,i,e){i||(i=" "),e||(e=",");var n=t.toString(),o=t<0,s=n.lastIndexOf(".");s=s>-1?s:n.length;for(var a=n.substring(s),r=-1,l=s;l>0;l--)++r%3==0&&l!==s&&(!o||l>1)&&(a=i+a),a=n.charAt(l-1)+a;return a.replace(".",e)},app.utils.bezier=function(t,i,e,n,o){var s=function(i){var n=1-i;return 3*n*n*i*t+3*n*i*i*e+i*i*i},a=function(t){var e=1-t;return 3*e*e*t*i+3*e*t*t*n+t*t*t},r=function(i){var n=1-i;return 3*(2*(i-1)*i+n*n)*t+3*(-i*i*i+2*n*i)*e};return function(t){var i,e,n,l,p,u,c=t;for(n=c,u=0;u<8;u++){if(l=s(n)-c,Math.abs(l)<o)return a(n);if(p=r(n),Math.abs(p)<1e-6)break;n-=l/p}if(i=0,e=1,(n=c)<i)return a(i);if(n>e)return a(e);for(;i<e;){if(l=s(n),Math.abs(l-c)<o)return a(n);c>l?i=n:e=n,n=.5*(e-i)+i}return a(n)}},(app=app||{}).utils=app.utils||{},app.utils.preload=function(t,i){var e=[],n=0;return _.each(t,function(o){var s=new Image;e.push(s),s.onload=function(){n++,i&&i(n/t.length)},s.src=o}),e},app.utils.isMobile=function(){return app.$window.width()<=960},(app=app||{}).utils=app.utils||{},app.utils.getScrollbarWidth=function(){var t=document.createElement("div");t.className="scrollbar-measure",document.body.appendChild(t);var i=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),i},(app=app||{}).utils=app.utils||{},app.utils.share=function(t,i,e){var n="http://share.yandex.ru/go.xml?service="+t+"&url="+encodeURIComponent(i)+"&title="+encodeURIComponent(e);app.utils.openPopup(n)},app.utils.openPopup=function(t){var i=(window.screen.width-800)/2,e=(window.screen.height-500)/2;window.open(t,"vote","height=500,width=800,top="+e+",left="+i).focus()},(app=app||{}).utils=app.utils||{},app.utils.setCoords=function(t,i,e){app.utils.setTransform(t,"translate("+i+"px, "+e+"px)")},app.utils.setScale=function(t,i){app.utils.setTransform(t,"scale("+i+")")},app.utils.setTransform=function(t,i){t.css("-webkit-transform",i),t.css("-ms-transform",i),t.css("transform",i)},function(t){jQuery.fn.extend({transform:function(i){app.utils.setTransform(t(this),i)}}),jQuery.fn.extend({setScale:function(t){app.$(this).css("font-size",t+"em")},removeScale:function(){app.$(this).css("font-size","")}})}(jQuery),(app=app||{}).utils=app.utils||{},app.utils.isValidEmail=function(t){return/^[a-zA-Z0-9](\.?[a-zA-Z0-9_-]){0,}@[a-zA-Z0-9-]+\.([a-zA-Z]{1,6}\.)?[a-zA-Z]{2,6}$/g.test(t)},app.utils.isValidName=function(t){return/^[а-яёА-ЯЁ]*$/g.test(t)},app.utils.isValidPhone=function(t){return/^\+[7]\s\([0-9]{3}\)\s[0-9]{3}\-[0-9]{2}\-[0-9]{2}/g.test(t)},(app=app||{}).PopUp=function(){this.initialize()},app.PopUp.prototype={initialize:function(){this.$items=$(".stories__announce"),this.$popup=$(".popup"),this.$close=$(".popup__close"),this.$items.click(_.bind(this.storyClick,this)),this.$close.click(_.bind(this.closeClick,this))},storyClick:function(){this.$popup.addClass("popup_isActive")},closeClick:function(){this.$popup.removeClass("popup_isActive")}},(app=app||{}).SlotAvtomat=function(){this.initialize()},app.SlotAvtomat.prototype={initialize:function(){this.$grip=$("div.avtomat__grip"),this.$bulbs=$("div.bulb"),this.$message=$("div.message"),this.isBlinking=!1,this.solotsController=new app.SlotsController,this.$grip.click(_.bind(this.clickGrip,this))},clickGrip:function(){this.isBlinking=!0,this.$message.html("Вам точно повезет!"),this.blinkingLights(),this.solotsController.runSlots();var t=this;setTimeout(function(){t.isBlinking=!1,t.solotsController.stopSlots(),t.checkResult()},15e3)},blinkingLights:function(){if(this.isBlinking){_.each(this.$bulbs,function(t,i){$(t).addClassDelayed("bulb_on",200*i),$(t).removeClassDelayed("bulb_on",200*i+500)},this);var t=this;setTimeout(function(){t.blinkingLights()},1e3)}},checkResult:function(){for(var t=this.solotsController.isWin();-1===t;){var i=this;setInterval(function(){t=i.solotsController.isWin()})}t&&(this.$message.html(""),this.$message.append('<img src="assets/images/avtomat/win.png">'))}},(app=app||{}).SlotsController=function(){this.initialize()},app.SlotsController.prototype={initialize:function(){this.slotArray=[],this.$slots=$(".avtomat__slot"),this.images=["apple","bell","seven"],this.isRun=!1,this.initSlots()},initSlots:function(){var t=$("#image-slot-template").html();void 0!==t?(this.template=_.template(t),_.each(this.$slots,function(t){this.addElementInSlot($(t));var i={$slot:$(t),$next:$(t).find(":first-child"),$active:$(t).find(":nth-child(2)"),$last:$(t).find(":last-child"),type:"",run:!1};i.$active.addClass("active"),i.$last.addClass("last"),i.$next.addClass("next"),this.slotArray.push(i)},this)):console.log("template not found")},runSlots:function(){this.isRun=!0;var t=this;_.each(t.slotArray,function(i){i.run=!0,t.playSlots(i),setTimeout(function(){i.run=!1},t.randomtime(!0))})},playSlots:function(t){if(t.run){var i=this;setTimeout(function(){i.slotSlick(t)},i.randomtime()),setTimeout(function(){i.playSlots(t)},500)}},slotSlick:function(t){t.$active.addClass("transform"),t.$next.removeClass("next");var i=t.$last.clone();$(i).removeClass("last"),$(i).addClass("next"),t.$slot.prepend(i),t.$slot.find(":last-child").remove();var e=this;setTimeout(function(){e.overridingSlotElements(t)},200)},stopSlots:function(){this.isRun=!1,_.each(this.slotArray,function(t){this.checkClass(t)},this)},randomtime:function(t){var i=100;!0===t&&(i=1e3);var e=i-.5+Math.random()*(15e3-i+1);return e=Math.round(e)},overridingSlotElements:function(t){this.checkClass(t),t.$next=t.$slot.find(":first-child"),t.$active=t.$slot.find(":nth-child(2)"),t.$last=t.$slot.find(":last-child"),t.$active.addClass("active"),t.$last.addClass("last"),t.$next.addClass("next"),t.type=t.$active.data("type")},checkClass:function(t){t.$last.removeClass("transform"),t.$last.removeClass("active"),t.$last.removeClass("prev"),t.$next.removeClass("transform"),t.$next.removeClass("active"),t.$next.removeClass("last"),t.$active.removeClass("transform"),t.$active.removeClass("next"),t.$active.removeClass("last")},addElementInSlot:function(t){_.each(this.images,function(i){var e={imageName:i};t.append(this.template(e))},this)},isWin:function(){if(3===_.filter(this.slotArray,{run:!1}).length){var t=this.slotArray[0].type,i=1;return _.each(this.slotArray,function(e){e.type!==t&&(i=0)},this),i}return-1}},(app=app||{}).SwitchButton=function(){this.initialize()},app.SwitchButton.prototype={initialize:function(){}},function(){"use strict";var t=$(".header__switch-button"),i=$(".info");$(".header__logo"),$(".header__switch-button");t.click(function(){$(this).html("info"),i.hasClass("info_show")?$(this).html("info"):$(this).html("story"),i.toggleClass("info_show")});$(".stories__announce");new app.SlotAvtomat}();
//# sourceMappingURL=app.min.js.map